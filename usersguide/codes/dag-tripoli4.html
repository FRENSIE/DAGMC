

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Code-specific steps for DAG-Tripoli4 &#8212; DAGMC</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.9',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Producing solid models for DAGMC using Cubit/Trelis" href="../trelis_workflow.html" />
    <link rel="prev" title="Code-specific steps for FluDAG" href="fludag.html" /> 
  </head>
  <body> 
<div id="page-div" class="page">
<div id="header">
    <a id="uwhome" href="http://www.wisc.edu"><img src="../../_static/images/wordmark.gif" alt="University of Wisconsin–Madison" width="260" height="11" /></a> 
    <a id="crest" href="http://www.wisc.edu"><img src="../../_static/images/crest.png" alt="" width="70" height="106" /></a>
    <h1 id="siteTitle"><a href="../../index.html"><img src="../../_static/images/logo.png" alt="" height="50x" /><span>DAGMC</span></a></h1>
    <div id="tagline"><span>Direct Accelerated Geometry Monte Carlo Toolkit</span></div>
    <ul id="globalnav">
      <li id="uwsearch"><a href="http://www.wisc.edu/search/">UW Search</a></li>
      <li><a href="http://cnerg.github.com">CNERG</a></li>
      <li><a href="http://my.wisc.edu">My UW</a></li>
      <li><a href="http://map.wisc.edu">Map</a></li>
      <li id="last_tool"><a href="http://www.today.wisc.edu">Calendar</a></li>
    </ul>
    <form role="search" action="../../search.html" method="get" id="cse-search-box">
      <div>
      <label class="screen-reader-text" for="q">Search for:</label>
      <input type="text" id="q" name="q" value="Enter keywords here...." />
      <input type="submit" id="sa" value="Search" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
      </div>
    </form>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>

    <div id="nav" class="main-menu-container">
      <ul id="menu-main" class="sf-menu">
        <li class="menu-item"><a href="http://svalinn.github.io">Svalinn</a></li>
        <li class="menu-item"><a href="../../index.html">DAGMC</a></li>
        <li class="menu-item" style="margin-right: 10px">
          <a href="fludag.html" title="Code-specific steps for FluDAG"
             accesskey="P">previous</a>
          </li>
        <li class="menu-item" >
          <a href="../trelis_workflow.html" title="Producing solid models for DAGMC using Cubit/Trelis"
             accesskey="N">next</a>
          </li>
        <li class="menu-item" >
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a>
          </li>
          <li class="menu-item"><a href="../index.html" >User’s guide</a></li>
          <li class="menu-item"><a href="index.html" accesskey="U">Monte Carlo code-specific steps</a></li> 
      </ul>
    </div>
  <div id="c_container"> 
<div id="sidebar">
 <div id="sidebar_section"><ul>
<li><a class="reference internal" href="#">Code-specific steps for DAG-Tripoli4</a><ul>
<li><a class="reference internal" href="#geometry-metadata">Geometry metadata</a><ul>
<li><a class="reference internal" href="#assigning-materials-densities">Assigning materials &amp; densities</a></li>
<li><a class="reference internal" href="#defining-boundary-conditions">Defining boundary conditions</a></li>
<li><a class="reference internal" href="#dagmc-runtime-parameters">DAGMC runtime parameters</a></li>
<li><a class="reference internal" href="#running-dag-tripoli4">Running DAG-Tripoli4</a></li>
</ul>
</li>
</ul>
</li>
</ul>
 </div>
</div> 
    <div id="content" class="inline-block">
          <div class="post">
            
  <div class="section" id="code-specific-steps-for-dag-tripoli4">
<h1>Code-specific steps for DAG-Tripoli4<a class="headerlink" href="#code-specific-steps-for-dag-tripoli4" title="Permalink to this headline">¶</a></h1>
<p>There are three varieties of code-specific steps:</p>
<ol class="arabic simple">
<li>defining attributes of the geometry using groups in Cubit/Trelis</li>
<li>defining DAGMC runtime parameters using input file syntax</li>
<li>changes to the command-line</li>
</ol>
<div class="section" id="geometry-metadata">
<h2>Geometry metadata<a class="headerlink" href="#geometry-metadata" title="Permalink to this headline">¶</a></h2>
<p>The current version of DAG-Tripoli4 allows the definition of material
compositions and boundary conditions in the geometry.</p>
<div class="section" id="assigning-materials-densities">
<h3>Assigning materials &amp; densities<a class="headerlink" href="#assigning-materials-densities" title="Permalink to this headline">¶</a></h3>
<p>The generic workflow description includes details on
<a class="reference internal" href="../trelis_basics.html#grouping-basics"><span class="std std-ref">Grouping volumes and surfaces</span></a>, but a specific naming convention is required
for DAG-Tripoli4. To define materials, the Tripoli composition name
must be provided in the group name. The format for the group name is
as follows:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>comp_[compname]
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">[compname]</span></code> is replaced by the composition name that will be
specified in the Tripoli4 input file.  <code class="docutils literal"><span class="pre">[density]</span></code> is replaced by
either the atomic density or the mass density.  Like the MCNP cell
cards, positive values are atomic densities in [atoms/barn-cm] and
negative values are mass densities in [g/cc].</p>
<p>For example, suppose UO2 is composition <code class="docutils literal"><span class="pre">Uoxide</span></code> and
volumes 4 through 18 consist of this material in the problem. To
assign materials to these volumes, the following command would be
used:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>CUBIT&gt; group &quot;comp_Uoxide&quot; add vol 4 to 18
</pre></div>
</div>
<p><em>Note: If a volume is not assigned to a specific group, when run in
DAGMC it will be treated as a void; the material for that cell will be
zero. This can actually become a fairly useful debugging tool to
identify volumes that were not assigned to their appropriate group.</em></p>
<p>If you would like to assign a material to the implicit complement, you
can use the same mechanism, but add the string <code class="docutils literal"><span class="pre">_comp</span></code> to the end of
the group name.  Since DAGMC only recognizes those groups that contain
an entity, it is necessary to add a volume to this group, recognizing
that this material will NOT be assigned to that volume.  (_It is often
convenient to assign the graveyard volume (see below) to the implicit
complement material group to minimize confusion._) For example, if you
would like the explicit complement to be modeled with the composition
named “air”:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>CUBIT&gt; create group &quot;comp_air_comp&quot;
</pre></div>
</div>
</div>
<div class="section" id="defining-boundary-conditions">
<h3>Defining boundary conditions<a class="headerlink" href="#defining-boundary-conditions" title="Permalink to this headline">¶</a></h3>
<p>There are two general classes of boundary condition supported by
DAG-Tripoli4. a vacuum boundary and reflecting surfaces, and they are
implemented in different ways.</p>
<p><strong>Defining the “graveyard”: vacuum boundaries</strong></p>
<p>A vacuum boundary condition is typically defined in Tripoli4 by simply
having a surface with no defined volume on its other side.  Since
DAGMC’s implicit complement is also defined this way, it is not
possible to use this convention in DAG-Tripoli4.  Instead, volumes are
created on the vacuum side of those same surfaces, but those volumes
are placed in a special group, known as the “graveyard” to change
their behavior.  Any geometric shape can be used for this; however, a
cubic shell is often preferred.  This shell volume will represent the
outside world and will be the cell where all of the particles are
terminated (thus it will have an importance of zero).</p>
<p>[need more on implicit complement in context of Tripoli]</p>
<p>To create this volume create two volumes in CUBIT with the same shape,
same center, and one slightly larger than the other.  Subtract the
smaller from the larger.  The remaining volume is the graveyard.</p>
<p>Like the material definitions and boundary conditions discussed in the
previous section. The graveyard is defined by assigning it a specific
group name, one of the following keywords:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>graveyard
outside.world
rest.of.world
</pre></div>
</div>
<p>Consider a geometry with 99 volumes that all fit within a cube
centered at the origin with side-length 99 cm.  To create a graveyard
for this problem in CUBIT, you could issue the following commands:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>CUBIT&gt; create brick x 100
CUBIT&gt; create brick x 105
CUBIT&gt; subtract vol 100 from vol 101
CUBIT&gt; group &quot;graveyard&quot; add vol 102
</pre></div>
</div>
<p>When DAG-Tripoli4 is run, the surfaces of volume 102 (or any other
volumes included in the group) will be defined as having only one
volume - the one on the OTHER SIDE relative to volume 102. <em>Note:
this assumes that the two</em> <code class="docutils literal"><span class="pre">create</span> <span class="pre">brick</span></code> <em>commands generate volumes
numbered 100 and 101, respectively, and that the Boolean subtraction
results in a new volume number 102.</em></p>
<p>If you have boundary conditions (reflecting, white, or periodic) it is
not required that you surround them with the bounding volume, but is
not incorrect to do so.  Only areas where particles should escape need
to be enclosed.  However, it is often easiest to simply create a
single graveyard that covers all directions and volumes of the entire
system.</p>
<p><strong>Surface boundary conditions: reflection</strong></p>
<p>Surface boundary conditions are similarly enforced by specifying a
group name. This type of attribute (surface boundary condition) is
only required if reflective or white boundary conditions are used in
the problem.  If not, this section may be skipped.  <em>Note that
periodic boundary conditions are not yet supported.</em></p>
<p>Specifying reflecting and white boundary conditions are fairly
straightforward.  The group names for reflecting and white are
respectively:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>spec.reflect
white.reflect
</pre></div>
</div>
<p>Suppose surfaces 10 and 11 are reflecting boundary conditions.  To
specify these as reflecting surfaces, the following group would be
created:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>CUBIT&gt; group &quot;spec.reflect&quot; add surf 10 11
</pre></div>
</div>
</div>
<div class="section" id="dagmc-runtime-parameters">
<h3>DAGMC runtime parameters<a class="headerlink" href="#dagmc-runtime-parameters" title="Permalink to this headline">¶</a></h3>
<p>The DAGMC-Tripoli input file is formatted just like any other Tripoli
input file but using the <code class="docutils literal"><span class="pre">DAGMC_GEOMETRY</span></code> block to indicate the
geometry.  This block has the following parameters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="53%" />
<col width="47%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>&lt;geometry_filename&gt;</td>
<td>This must be the first parameter</td>
</tr>
<tr class="row-even"><td>facet_tol &lt;double faceting tolerance&gt;</td>
<td>(optional: default=0.001)</td>
</tr>
<tr class="row-odd"><td>facet_file &lt;string faceting filename&gt;</td>
<td>(optional)</td>
</tr>
<tr class="row-even"><td>check_src_cell &lt;”off”|”false”|”no”&gt;</td>
<td>(optional: default=on)</td>
</tr>
<tr class="row-odd"><td>usecad &lt;”on”|”true”|”yes”&gt;</td>
<td>(optional: default=off)</td>
</tr>
<tr class="row-even"><td>distlimit &lt;”on”|”true”|”yes”&gt;</td>
<td>(optional: default=off)</td>
</tr>
<tr class="row-odd"><td>tolerance &lt;double ray firing tolerance&gt;</td>
<td>(optional: default=1e-8)</td>
</tr>
</tbody>
</table>
<p>These parameters are described in the section on additional_parameters.
In addition to many other Tripoli input blocks, it is important to define the
material compositions that have been assigned in the previous step.</p>
</div>
<div class="section" id="running-dag-tripoli4">
<h3>Running DAG-Tripoli4<a class="headerlink" href="#running-dag-tripoli4" title="Permalink to this headline">¶</a></h3>
<p>Running DAGMC-Tripoli is identical to running the standard Tripoli.</p>
</div>
</div>
</div>


          </div>
      </div>

    </div>
</div>
    <div id="footer">
      <p>
        &copy; Copyright 2012-2017, The UW CNERG Team.
      </p>
      <p>
      Last updated on Nov 03, 2017.
      </p>
      <p>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.6.5.
      </p>
    </div>
  </body>
</html>